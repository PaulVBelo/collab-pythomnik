# 1 - Трансляторы, Интерпретаторы и Байт-код

## Список тем:

- **Архитектуры компьютеров:** Архитектура фон Неймана, Гарвардская архитектура, Bottleneck, Риски безопасности, проблема когерентность памяти, где какой тип архитектуры используется?
- **Кэш процессора:** Что такое кеширование? Зачем нужны три уровня кэша (L1, L2, L3)? Кэш процессора размером 1ТБ?: SRAM/DRAM, скорость доступа, ...
- **Python процесс трансляции:** Lexer, Parser, Semantic Analysis, байт-код и где он исполняется? **Что такое:** токены из кода, AST, .pyc? **Модули:** tokenize, ast, mypy, dis, py_compile, marshal? Директория: `__pycache__`? Объект класса code?
- **Python байт-код:** компиляция или трансляция? В чём его отличие от двоичного представления? Как увидеть байт-код? Байт-код и архитектура компьютера. От чего зависит вид байт-кода, один и тот же ли он под конкретную реализацию языка Python? Как исполняется байт-код?
- **PVM:** что это и какую роль играет? При чём тут GC и управление ресурсами?
- **JIT:** Что это, как работает и зачем нужно? Этапы. Что такое 'горячие точки' и причём тут кэширование? Недостатки JIT: время запуска, память, сложность.
- **Что такое:** CPython / Cython, PyPy, Jython, GraalPy, Nogil, Pyodide, Brython, MicroPython?
- **Что такое:** GIL?
_________
## ***Архитектуры компьютеров***

Архитектура фон Неймана и архитектура Гарварда — это две основные модели компьютерной архитектуры, которые описывают, как организованы память и процессорные устройства компьютера. Эти архитектуры являются основой большинства современных вычислительных систем.

**TL;DR**: *Архитектура фон Неймана* характеризуется единым пространством памяти под данные и инструкции. Она подходит для вычислений общего назначения благодаря своей простоте и экономической эффективности. Однако она страдает от *bottleneck* - ограничения на пропускную способность памяти. 
*Гарвардская архитектура* более эффективна для конкретных задач, требующих высокой производительности и обработки в реальном времени, благодаря раздельным путям памяти. Она широко используется в специализированных приложениях, таких как встроенные системы и DSP.
### Архитектура фон Неймана

Модель фон Неймана описывает архитектуру компьютера, в которой и программные инструкции, и данные хранятся в одной и той же области памяти.

![[Схема_архитектуры_фон_Неймана.svg|560]]
#### Основные характеристики:

- ***Единое пространство памяти:*** Инструкции (код) и данные хранятся в одной и той же памяти. Это означает, что процессор извлекает и инструкции, и данные из одной общей памяти.
- ***Последовательное выполнение:*** Инструкции извлекаются из памяти и выполняются одна за другой в последовательном порядке. Следующая инструкция извлекается только после выполнения текущей.
- ***Управляющее устройство и ALU (Arithmetic Logic Unit)*:** Процессор обычно включает управляющее устройство, которое интерпретирует инструкции, и ALU, которое выполняет математические операции. Оба устройства используют общий шину памяти для доступа к инструкциям и данным.
- ***Бутылочное горлышко фон Неймана***: Существенное ограничение заключается в том, что инструкции и данные не могут извлекаться одновременно, поскольку они используют один и тот же путь передачи данных. Это создает узкое место, ограничивая скорость выполнения инструкций процессором, так как ему постоянно приходится переключаться между доступом к данным и извлечением инструкций.

##### Преимущества:

- ***Простота модели:*** Хранение данных и инструкций в одном месте упрощает управление памятью. Не нужно думать о разделении или организации различных типов памяти, что уменьшает сложность системы. Процессор использует одну шину для доступа к обоим типам информации.
	- *Пример:* Представьте, что у вас есть книга рецептов, в которой и сами рецепты (инструкции), и ингредиенты (данные) хранятся на одной полке. Вам не нужно идти в два разных места, чтобы получить инструкции по приготовлению и ингредиенты — всё, что нужно, находится вместе, в одном удобном месте.
- ***Экономичность:*** Использование одной общей памяти и единых каналов передачи данных означает, что нет необходимости в установке дополнительных модулей памяти или сложных маршрутов передачи данных. Это сокращает количество аппаратных деталей, что уменьшает затраты на производство таких систем.
- ***Гибкость:*** Гибкость архитектуры заключается в том, что единая модель памяти упрощает проектирование и программирование универсальных компьютеров. Благодаря этому одна и та же архитектура может справляться с разными типами задач и инструкций без необходимости использования специализированного оборудования для каждой операции.

##### Недостатки:

- ***Bottleneck:*** Совместное использование шины (канала передачи данных) для инструкций и данных создает узкое место, ограничивая доступ к памяти, так как в каждый момент можно получить доступ только к одному элементу данных или инструкции, что снижает производительность процессора. 

  ![[Von_Neumann_Architecture-bottleneck-rus.png|240]]
  Это решается усовершенствованием систем кэширования, что усложняет архитектуру и увеличивает риск ошибок, таких как проблема когерентности памяти (см. Кеши процессора).

- ***Риски безопасности:*** Совместное хранение кода и данных в одной памяти упрощает вредоносному коду изменение инструкций программы или данных: Injection Attacks, Buffer Overflow и другие.
##### Где используется:

- Архитектура фон Неймана широко используется в компьютерах общего назначения, таких как настольные компьютеры, ноутбуки и серверы.
- Большинство современных процессоров, включая процессоры x86, основаны на модели фон Неймана.

### Гарвардская архитектура

Гарвардская архитектура - альтернативная архитектура компьютера, в которой инструкции и данные хранятся и передаются отдельно.

![[Гарвардская_архитектура_компьютера.svg|560]]
##### Основные характеристики:
- ***Раздельная память:*** Инструкции (код) и данные хранятся в разных местах (память) и используют отдельные шины (каналы передачи данных) и адресные пространства (диапазон адресов памяти).
##### Преимущества:

- ***Параллельность и скорость:*** CPU может одновременно получать инструкции и данные, устраняя узкие места, как в архитектуре фон Неймана, что позволяет быстрее обрабатывать информацию, поскольку не нужно ждать доступа к памяти.
- ***Большая безопасность:*** поскольку инструкции и данные хранятся отдельно, вредоносному коду сложнее изменить инструкции программы, что обеспечивает более безопасное выполнение.
- ***Специализация:*** различные архитектуры памяти и методы доступа могут быть оптимизированы для инструкций и данных независимо друг от друга, что обеспечивает большую гибкость и настройку производительности.
##### Недостатки:

- ***Сложность:*** конструкция требует отдельных блоков памяти и шин для инструкций и данных, что увеличивает сложность и стоимость.
- ***Меньшая гибкость:*** изменение набора инструкций или конфигурации хранилища данных может быть более сложным и менее гибким по сравнению с архитектурой фон Неймана.

##### Где используется:

- Широко используется во встраиваемых системах, микроконтроллерах и цифровых сигнальных процессорах (DSP), где эффективность и скорость имеют решающее значение.
- Распространено в средах обработки в реальном времени, где требуется предсказуемое выполнение и высокая производительность.

__________
## ***Кэши процессора***



